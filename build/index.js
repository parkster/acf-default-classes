(()=>{"use strict";const{useEffect:e}=wp.element,{apiFetch:t}=wp,{select:s,subscribe:c,dispatch:l}=wp.data;wp.hooks.addFilter("blocks.registerBlockType","acf-default-classes/add-default-classes",((a,n)=>{{const o=a.edit;return a.edit=a=>{const{clientId:i}=a;if(e((()=>{let e=s("core/block-editor").getBlocks();const a=new Map;e.forEach((e=>{a.set(e.clientId,e.innerBlocks)}));const o=c((()=>{const c=s("core/block-editor").getBlocks(),o=new Map;if(c.forEach((e=>{o.set(e.clientId,e.innerBlocks)})),c.length>e.length){const e=c.find((e=>!a.has(e.clientId)));e&&e.name===n&&t({path:`/acf-default-classes/v1/default-class-list?name=${n}`}).then((t=>{l("core/block-editor").updateBlockAttributes(e.clientId,{className:t.defaultClassList})}))}o.forEach(((e,s)=>{const c=a.get(s);if(c&&e.length>c.length){const s=e.find((e=>!c.some((t=>t.clientId===e.clientId))));s&&s.name===n&&t({path:`/acf-default-classes/v1/default-class-list?name=${n}`}).then((e=>{l("core/block-editor").updateBlockAttributes(s.clientId,{className:e.defaultClassList})}))}})),e=c,a.clear(),e.forEach((e=>{a.set(e.clientId,e.innerBlocks)}))}));return()=>{o()}}),[i]),o)return o(a)},a}}))})();